import{_,u as h,r as l,c as f,o as y,a as b,b as o,w as L,d as w,v as x,n as k,e as N,f as I,g as q,h as E,G as R}from"./index-66dab118.js";const S={class:"page-container"},G={class:"content-container"},V={class:"login-section"},B={class:"input-group"},M=["disabled"],Q={class:"google-button-container"},C={__name:"Login",setup(z){const a=I(),r=q(),{login:u,signInWithName:c,isLoggedIn:d}=h(),n=l(""),s=l(!1),i=f(()=>{const t=n.value.trim();return t.length>=2&&t.length<=50}),g=async()=>{s.value=!1;const t=n.value.trim();if(!i.value){s.value=!0;return}try{await c(t),n.value="",a.push(r.query.redirect||"/")}catch(e){console.error("Quick login error:",e),s.value=!0}},m=async t=>{try{await u(t),a.push(r.query.redirect||"/")}catch(e){console.error("Login error:",e)}},p=t=>{console.error("Login failed:",t)};return y(()=>{if(d.value){const t=localStorage.getItem("intendedRoute")||"/vote";localStorage.removeItem("intendedRoute"),a.push(t)}}),(t,e)=>(E(),b("div",S,[o("div",G,[o("div",V,[e[2]||(e[2]=o("p",{class:"login-text"},"Please enter at least 2 characters to continue.",-1)),o("form",{onSubmit:L(g,["prevent"]),class:"quick-login-form"},[o("div",B,[w(o("input",{"onUpdate:modelValue":e[0]||(e[0]=v=>n.value=v),type:"text",name:"name",placeholder:"Enter your name",class:k(["name-input",{error:s.value}]),required:"",minlength:"2",maxlength:"50",autocomplete:"name"},null,2),[[x,n.value]])]),o("button",{type:"submit",class:"guest-button",disabled:!i.value}," Continue as Guest ",8,M),e[1]||(e[1]=o("p",{class:"quick-login-note"}," Quick login with name allows you to start voting instantly. Note: Once you log out, you won't be able to edit your votes. For permanent access, use Google login instead. ",-1))],32),e[3]||(e[3]=o("div",{class:"divider"},[o("span",null,"or")],-1)),o("div",Q,[N(R,{onSuccess:m,onError:p})])])])]))}},D=_(C,[["__scopeId","data-v-cf5b8130"]]);export{D as default};
